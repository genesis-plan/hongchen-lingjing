<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® çº¢å°˜çµå¢ƒ Â· åå››æ®¿ Â· èµ›åšå›½é£æŠ€èƒ½å…±åˆ›ç©ºé—´</title>
    <style>
        :root { --primary: #6a11cb; --secondary: #2575fc; --accent: #ff7e5f; --dark: #2d3436; --light: #f9f9f9; }
        * { box-sizing: border-box; margin: 0; font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif; }
        body { background: linear-gradient(135deg, #fdfcfb 0%, #e2d1c3 100%); color: #333; min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 30px auto; background: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 24px; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1); border: 1px solid rgba(255, 255, 255, 0.5); }
        h1, h2 { text-align: center; color: var(--dark); margin-bottom: 15px; }
        h1 { font-size: 2.8em; background: linear-gradient(to right, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .slogan { text-align: center; font-size: 1.1em; margin-bottom: 30px; color: #666; font-style: italic; }

        /* å¯¼èˆªæ ï¼ˆ14ä¸ªé€‰é¡¹å¡ï¼‰ */
        .nav-tabs {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 6px;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }
        .tab-btn {
            padding: 8px 16px;
            background: none;
            border: 2px solid transparent;
            border-radius: 40px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 500;
            transition: all 0.3s;
            white-space: nowrap;
        }
        .tab-btn.active, .tab-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .tab-content { display: none; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .tab-content.active { display: block; }

        /* é€šç”¨æ ·å¼ */
        .building-card {
            background: white;
            border-radius: 18px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.05);
            border: 1px solid rgba(106,17,203,0.15);
            margin: 20px 0;
        }
        .wish-input, .skill-input { width: 100%; padding: 18px; border: 2px solid #ddd; border-radius: 12px; font-size: 1em; margin-bottom: 20px; resize: vertical; transition: border 0.3s; }
        .wish-input:focus, .skill-input:focus { outline: none; border-color: var(--primary); }
        .btn { background: linear-gradient(to right, var(--primary), var(--secondary)); color: white; padding: 14px 32px; border: none; border-radius: 10px; cursor: pointer; font-size: 1em; font-weight: bold; display: inline-block; margin: 10px 5px; transition: all 0.3s; box-shadow: 0 4px 14px rgba(106, 17, 203, 0.4); }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(106, 17, 203, 0.6); opacity: 0.95; }
        .list-item { background: #f8fafc; border-left: 5px solid var(--primary); padding: 20px; margin-bottom: 20px; border-radius: 12px; box-shadow: 0 3px 10px rgba(0,0,0,0.05); }
        .seed-tags { margin: 25px 0; display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; }
        .seed-tag { background: #e8f4ff; padding: 10px 20px; border-radius: 50px; cursor: pointer; font-size: 0.9em; transition: all 0.2s; border: 1px solid #c2e0ff; }
        .seed-tag:hover { background: #c2e0ff; transform: scale(1.05); }
        .feature-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        .feature-card {
            flex: 1 1 200px;
            background: #f8faff;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            border: 1px solid #e0e7ff;
        }
        .feature-card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        .feature-card h4 {
            font-size: 1.2rem;
            margin-bottom: 8px;
            color: var(--dark);
        }
        .feature-card p {
            color: #666;
            font-size: 0.9rem;
        }
        .coming-soon {
            background: #f0f0f0;
            padding: 20px;
            text-align: center;
            border-radius: 12px;
            color: #666;
            font-style: italic;
            margin: 20px 0;
        }
        .landing-area {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(145deg, #f9f5ff, #f0f0ff);
            border-radius: 30px;
            margin: 30px 0;
        }
        .ship-icon {
            font-size: 5rem;
            color: var(--primary);
            filter: drop-shadow(0 0 15px var(--primary));
            animation: float 3s infinite ease-in-out;
            margin-bottom: 20px;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        .anon-id {
            font-size: 1.2rem;
            color: #666;
            background: rgba(106,17,203,0.1);
            padding: 10px 20px;
            border-radius: 40px;
            display: inline-block;
            margin: 20px 0;
        }
        .skill-card {
            background: #f0f0ff;
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 25px;
            max-width: 500px;
            margin: 20px auto;
            text-align: center;
        }
        .skill-icon {
            font-size: 4rem;
            margin-bottom: 10px;
        }
        .skill-progress {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
        }
        .progress-step {
            flex: 1;
            text-align: center;
            position: relative;
        }
        .progress-step::before {
            content: '';
            position: absolute;
            top: 15px;
            left: -50%;
            width: 100%;
            height: 3px;
            background: #ddd;
            z-index: 0;
        }
        .progress-step:first-child::before { display: none; }
        .progress-step.completed .step-icon {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }
        .step-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 2px solid var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 5px;
            position: relative;
            z-index: 1;
        }
        .step-label {
            font-size: 0.8rem;
            color: #666;
        }
        .quiz-option {
            background: white;
            border: 2px solid #ddd;
            border-radius: 12px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.2s;
        }
        .quiz-option:hover {
            border-color: var(--primary);
            background: #f0f0ff;
        }
        .quiz-option.selected {
            border-color: var(--primary);
            background: #e0e0ff;
            font-weight: bold;
        }
        .certificate {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            margin: 30px 0;
        }
        .certificate h3 {
            color: #856404;
        }
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #888;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® çº¢å°˜çµå¢ƒ</h1>
        <p class="slogan">ã€Œ ä»¥å¤é£ä¸ºéª¨ï¼Œä»¥ç§‘æŠ€ä¸ºç¿¼ï¼Œäººäººçš†æ˜¯æŠ€èƒ½å…±åˆ›è€… ã€</p>

        <!-- 14ä¸ªå»ºç­‘é€‰é¡¹å¡ -->
        <div class="nav-tabs">
            <button class="tab-btn active" data-tab="home">ğŸšª çµæ§æ´¥æ¸¡</button>
            <button class="tab-btn" data-tab="library">ğŸ“œ ç…å¬›ç¦åœ°</button>
            <button class="tab-btn" data-tab="practice">ğŸ“‹ è€ƒå·¥å®è®­åº</button>
            <button class="tab-btn" data-tab="exam">âš–ï¸ ç™¾ç‚¼é‰´å¿ƒå°</button>
            <button class="tab-btn" data-tab="create">ğŸ› ï¸ å¤©å·¥å¼€ç‰©åŠ</button>
            <button class="tab-btn" data-tab="shenji">ğŸ§  ç¥æœºæ¢é˜</button>
            <button class="tab-btn" data-tab="govern">ğŸ‘¥ ç¾¤è´¤æ¯•è‡³å ‚</button>
            <button class="tab-btn" data-tab="honor">ğŸ† è£å…‰éºŸé˜</button>
            <button class="tab-btn" data-tab="post">ğŸ•Šï¸ é’é¸Ÿæ˜Ÿé©¿</button>
            <button class="tab-btn" data-tab="market">â˜¯ï¸ ä¸¤ä»ªå¢Ÿå¸‚</button>
            <button class="tab-btn" data-tab="resource">ğŸŒ ä¸‡è±¡ç’‡ç‘é˜</button>
            <button class="tab-btn" data-tab="economy">ğŸ’° æ³‰åºœé€šè¡¢</button>
            <button class="tab-btn" data-tab="space">ğŸª· èŠ¥å­è—è™š</button>
            <button class="tab-btn" data-tab="challenge">ğŸŒŸ æ˜Ÿæ¢é—®é“å°</button>
        </div>

        <!-- 1å· çµæ§æ´¥æ¸¡ -->
        <div id="home" class="tab-content active">
            <h2>ğŸšª çµæ§æ´¥æ¸¡ Â· åˆå…¥çµå¢ƒ</h2>
            <div class="landing-area">
                <div class="ship-icon">â›µ</div>
                <p style="font-size: 1.3rem; margin-bottom: 20px;">æ¬¢è¿æ¥åˆ°çº¢å°˜çµå¢ƒï¼Œè¿™é‡Œæ˜¯ä½ çš„ç™»å²¸ä¹‹åœ°ã€‚</p>
                <button class="btn" onclick="landing()">âš“ çµæ§ç™»å²¸</button>
                <p id="anon-id-display" class="anon-id">ç­‰å¾…ç™»å²¸...</p>
                <p style="color: #888; margin-top: 20px;">ç™»å²¸åå°†è·å¾—æ°¸ä¹…åŒ¿åIDï¼Œå¼€å¯çµå¢ƒä¹‹æ—…ã€‚</p>
            </div>
        </div>

        <!-- 2å· ç…å¬›ç¦åœ° -->
        <div id="library" class="tab-content">
            <h2>ğŸ“œ ç…å¬›ç¦åœ° Â· æŠ€èƒ½å›¾ä¹¦é¦†</h2>
            <p style="text-align: center;">æ¨èç»™ä½ ç¬¬ä¸€ä¸ªæŠ€èƒ½ï¼šå¤ªæÂ·æ— æå¼</p>
            <div class="skill-card">
                <div class="skill-icon">â˜¯ï¸</div>
                <h3>å¤ªæÂ·æ— æå¼</h3>
                <p>å¤ªæå…¥é—¨ç¬¬ä¸€å¼ï¼Œç«™æ¡©åŸºç¡€ï¼Œè°ƒå’Œèº«å¿ƒã€‚</p>
                <p style="color: #888; margin: 15px 0;">é€šè¿‡ç‚¹äº®æ­¤æŠ€èƒ½ï¼Œå¼€å¯å¤ªæä¼ æ‰¿ä¹‹è·¯ã€‚</p>
                <button class="btn" onclick="lightSkill()" id="light-skill-btn">âœ¨ ç‚¹äº®æŠ€èƒ½</button>
                <p id="skill-status" style="margin-top: 15px;"></p>
            </div>
            <div class="seed-tags">
                <span class="seed-tag" onclick="fillWish('æƒ³å­¦3åˆ†é’Ÿæ±‰æœé½èƒ¸è¥¦è£™ç³»å¸¦çš„æ­£ç¡®æ–¹æ³•')">#æ±‰æœç³»å¸¦</span>
                <span class="seed-tag" onclick="fillWish('æƒ³è¦ç®€å•çš„ä¼ ç»Ÿæ‹±æ‰‹ç¤¼æ•™å­¦')">#ä¼ ç»Ÿç¤¼ä»ª</span>
                <span class="seed-tag" onclick="fillWish('æƒ³è¦å¤é£å¤´åƒæ¶‚é¸¦æ•™ç¨‹')">#å¤é£æ¶‚é¸¦</span>
            </div>
            <textarea id="wishInput" class="wish-input" placeholder="åœ¨æ­¤æè¿°ä½ æƒ³å­¦ä¼šçš„æŠ€èƒ½..."></textarea>
            <button class="btn" onclick="submitWish()">âœ¨ å‘å¸ƒå¿ƒæ„¿</button>
            <div id="wishList"></div>
        </div>

        <!-- 3å· è€ƒå·¥å®è®­åº -->
        <div id="practice" class="tab-content">
            <h2>ğŸ“‹ è€ƒå·¥å®è®­åº Â· æŠ€èƒ½å®æ“</h2>
            <div id="practice-area">
                <div id="steps-container" class="skill-progress"></div>
                <div id="step-desc" style="text-align: center; margin: 20px 0;">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹ç»ƒä¹ </div>
                <div style="text-align: center;">
                    <button class="btn" onclick="startPractice()" id="start-practice">å¼€å§‹ç»ƒä¹ </button>
                    <button class="btn" onclick="nextStep()" id="next-step" style="display:none;">ä¸‹ä¸€æ­¥</button>
                    <button class="btn" onclick="finishPractice()" id="finish-practice" style="display:none;">å®Œæˆç»ƒä¹ </button>
                </div>
                <div id="practice-message"></div>
            </div>
        </div>

        <!-- 4å· ç™¾ç‚¼é‰´å¿ƒå° -->
        <div id="exam" class="tab-content">
            <h2>âš–ï¸ ç™¾ç‚¼é‰´å¿ƒå° Â· è€ƒæ ¸è®¤è¯</h2>
            <div id="quiz-area">
                <p><strong>é—®é¢˜ï¼šæ— æå¼çš„æ­£ç¡®è¦é¢†æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
                <div class="quiz-option" onclick="selectAnswer(1)">A. åŒè„šå¹¶æ‹¢ï¼Œè†ç›–å¼¯æ›²ï¼ŒåŒæ‰‹ä¸ŠæŠ¬</div>
                <div class="quiz-option" onclick="selectAnswer(2)">B. åŒè„šä¸è‚©åŒå®½ï¼Œè†ç›–å¾®å±ˆï¼ŒåŒæ‰‹è‡ªç„¶ä¸‹å‚</div>
                <div class="quiz-option" onclick="selectAnswer(3)">C. åŒè„šåˆ†å¼€ï¼ŒæŒºç›´è†ç›–ï¼ŒåŒæ‰‹å‰è…°</div>
                <div style="text-align: center;">
                    <button class="btn" onclick="submitQuiz()" id="submit-quiz">æäº¤ç­”æ¡ˆ</button>
                </div>
                <div id="quiz-result"></div>
                <div id="certificate-area" style="display:none;">
                    <div class="certificate">
                        <h3>ğŸ… æŠ€èƒ½è¯ä¹¦</h3>
                        <p style="font-size: 1.3rem;">å¤ªæÂ·æ— æå¼</p>
                        <p>ä¹ ç»ƒè€…ï¼š<span id="cert-name">åŒ¿åè¡Œè€…</span></p>
                        <p>æˆäºˆæ—¥æœŸï¼š<span id="cert-date"></span></p>
                        <p>çº¢å°˜çµå¢ƒ Â· ç™¾ç‚¼é‰´å¿ƒå°</p>
                    </div>
                    <button class="btn" onclick="viewHonor()">æŸ¥çœ‹è£èª‰</button>
                </div>
            </div>
        </div>

        <!-- 5å· å¤©å·¥å¼€ç‰©åŠ -->
        <div id="create" class="tab-content">
            <h2>ğŸ› ï¸ å¤©å·¥å¼€ç‰©åŠ Â· åˆ›é€ æœ¬æº</h2>
            <p>å°†ä½ çš„æŠ€èƒ½è½¬åŒ–ä¸ºå¯ä¼ æ‰¿çš„å…¸ç±</p>
            <input type="text" id="skillTitle" class="skill-input" placeholder="æŠ€èƒ½åç§°">
            <textarea id="skillDesc" class="skill-input" rows="4" placeholder="è¯¦ç»†æè¿°ä½ çš„æŠ€èƒ½..."></textarea>
            <button class="btn" onclick="submitSkill()">ğŸ“– ç”Ÿæˆå…¸ç±</button>
            <div id="skillResult"></div>
        </div>

        <!-- 6å· ç¥æœºæ¢é˜ -->
        <div id="shenji" class="tab-content">
            <h2>ğŸ§  ç¥æœºæ¢é˜ Â· æ™ºæ…§ä¸­æ¢</h2>
            <div class="building-card">
                <p>ä¸ºå…¨ç”Ÿæ€æä¾›AIèƒ½åŠ›ï¼Œå½“å‰å·²é›†æˆæ™ºè°±GLM-4.7-Flashå…è´¹å¤§æ¨¡å‹ã€‚</p>
                <div class="feature-grid">
                    <div class="feature-card"><i>ğŸ¤–</i><h4>æ™ºèƒ½é—®ç­”</h4><p>å›ç­”æŠ€èƒ½ç›¸å…³é—®é¢˜</p></div>
                    <div class="feature-card"><i>ğŸ›¡ï¸</i><h4>å†…å®¹å®¡æ ¸</h4><p>æ•æ„Ÿè¯è¿‡æ»¤</p></div>
                    <div class="feature-card"><i>ğŸ“š</i><h4>æŠ€èƒ½æ¨è</h4><p>ä¸ªæ€§åŒ–æ¨è</p></div>
                </div>
                <textarea id="aiQuestion" class="wish-input" placeholder="è¯•è¯•å‘ç¥æœºæé—®..."></textarea>
                <button class="btn" onclick="askShenji()">æé—®</button>
                <div id="shenjiAnswer" class="list-item"></div>
                <div id="shenji-stats" class="coming-soon">çŠ¶æ€ï¼šè¿è¡Œä¸­</div>
            </div>
        </div>

        <!-- 7å· ç¾¤è´¤æ¯•è‡³å ‚ -->
        <div id="govern" class="tab-content">
            <h2>ğŸ‘¥ ç¾¤è´¤æ¯•è‡³å ‚ Â· ç¤¾åŒºå…±æ²»</h2>
            <div class="building-card">
                <p>å‘èµ·ææ¡ˆï¼ŒAIä¸ºæ‚¨ç”Ÿæˆæ‘˜è¦å’Œå…³é”®è¯</p>
                <textarea id="proposalContent" class="wish-input" placeholder="è¾“å…¥æ‚¨çš„ææ¡ˆå†…å®¹..."></textarea>
                <button class="btn" onclick="generateSummary()">ç”Ÿæˆæ‘˜è¦</button>
                <div id="proposalResult" class="list-item"></div>
            </div>
        </div>

        <!-- 8å· è£å…‰éºŸé˜ -->
        <div id="honor" class="tab-content">
            <h2>ğŸ† è£å…‰éºŸé˜ Â· è£èª‰æ®¿å ‚</h2>
            <div class="building-card">
                <p>æŸ¥çœ‹ä½ çš„è£èª‰ä¸æˆå°±</p>
                <div id="tai-chi-honor" class="list-item">
                    <h4>ğŸ… å¤ªæå…¥é—¨è€…</h4>
                    <p>çŠ¶æ€ï¼š<span id="tai-chi-status" class="status-badge status-pending">æœªå®Œæˆ</span></p>
                </div>
                <button class="btn" onclick="refreshHonor()">åˆ·æ–°è£èª‰</button>
                <div id="honorComment"></div>
            </div>
        </div>

        <!-- 9å· é’é¸Ÿæ˜Ÿé©¿ -->
        <div id="post" class="tab-content">
            <h2>ğŸ•Šï¸ é’é¸Ÿæ˜Ÿé©¿ Â· æ—¶ç©ºäº¤äº’</h2>
            <div class="building-card">
                <p>ç»™å¤äººæˆ–æœªæ¥çš„è‡ªå·±å†™ä¸€å°ä¿¡</p>
                <select id="letterTarget" class="skill-input">
                    <option value="æç™½">æç™½</option>
                    <option value="è‹è½¼">è‹è½¼</option>
                    <option value="ç‹ç¾²ä¹‹">ç‹ç¾²ä¹‹</option>
                    <option value="future">æœªæ¥çš„è‡ªå·±</option>
                </select>
                <textarea id="letterContent" class="wish-input" placeholder="è¾“å…¥ä½ çš„ä¿¡..."></textarea>
                <button class="btn" onclick="sendLetter()">å¯„å‡º</button>
                <div id="letterReply" class="list-item"></div>
            </div>
        </div>

        <!-- 10å· ä¸¤ä»ªå¢Ÿå¸‚ -->
        <div id="market" class="tab-content">
            <h2>â˜¯ï¸ ä¸¤ä»ªå¢Ÿå¸‚ Â· ç¤¾äº¤ä¼‘é—²</h2>
            <div class="building-card">
                <p>ä»Šæ—¥çƒ­é—¨è¯é¢˜æ¨è</p>
                <button class="btn" onclick="getTopics()">è·å–è¯é¢˜</button>
                <div id="topicsList" class="list-item"></div>
            </div>
        </div>

        <!-- 11å· ä¸‡è±¡ç’‡ç‘é˜ -->
        <div id="resource" class="tab-content">
            <h2>ğŸŒ ä¸‡è±¡ç’‡ç‘é˜ Â· èµ„æºä¸­æ¢</h2>
            <div class="building-card">
                <p>å‘å¸ƒèµ„æºéœ€æ±‚æˆ–å¯»æ‰¾åˆä½œ</p>
                <input type="text" id="demandInput" class="skill-input" placeholder="ä¾‹å¦‚ï¼šæˆ‘éœ€è¦æœ¨å·¥å¸ˆå‚…...">
                <button class="btn" onclick="matchResource()">åŒ¹é…èµ„æº</button>
                <div id="resourceResult" class="list-item"></div>
            </div>
        </div>

        <!-- 12å· æ³‰åºœé€šè¡¢ -->
        <div id="economy" class="tab-content">
            <h2>ğŸ’° æ³‰åºœé€šè¡¢ Â· ç»æµå¸‚åœº</h2>
            <div class="building-card">
                <p>ä½œå“ä»·å€¼å±•ç¤º</p>
                <input type="text" id="workTitle" class="skill-input" placeholder="ä½œå“åç§°">
                <textarea id="workDesc" class="wish-input" placeholder="ä½œå“ç®€ä»‹..."></textarea>
                <button class="btn" onclick="generateDescription()">ç”Ÿæˆç®€ä»‹</button>
                <div id="workResult" class="list-item"></div>
            </div>
        </div>

        <!-- 13å· èŠ¥å­è—è™š -->
        <div id="space" class="tab-content">
            <h2>ğŸª· èŠ¥å­è—è™š Â· ä¸ªäººç©ºé—´</h2>
            <div class="building-card">
                <p>ä½ çš„æ•°å­—åˆ†èº«ä¸è¶³è¿¹</p>
                <div class="character-builder">
                    <div class="char-option" onclick="selectCharPart('hanfu', 'é½èƒ¸è¥¦è£™')">æ±‰æœ Â· é½èƒ¸è¥¦è£™</div>
                    <div class="char-option" onclick="selectCharPart('hanfu', 'åœ†é¢†è¢')">æ±‰æœ Â· åœ†é¢†è¢</div>
                    <div class="char-option" onclick="selectCharPart('accessory', 'æœºæ¢°å‘ç°ª')">é…é¥° Â· æœºæ¢°å‘ç°ª</div>
                    <div class="char-option" onclick="selectCharPart('pattern', 'äº‘çº¹æ•°æ®æµ')">çº¹é¥° Â· äº‘çº¹æ•°æ®æµ</div>
                </div>
                <div id="characterPreview">çµç›¸æœªæ˜¾ï¼Œå¾…å›é€ åŒ–...</div>
                <button class="btn" onclick="saveCharacter()">ä¿å­˜çµç›¸</button>
                <button class="btn" onclick="generateFootprintStory()">ç”Ÿæˆè¶³è¿¹æ•…äº‹</button>
                <div id="footprintStory"></div>
            </div>
        </div>

        <!-- 14å· æ˜Ÿæ¢é—®é“å° -->
        <div id="challenge" class="tab-content">
            <h2>ğŸŒŸ æ˜Ÿæ¢é—®é“å° Â· æ´»åŠ¨æŒ‘æˆ˜</h2>
            <div class="building-card">
                <p>å‚ä¸èµ›å­£æŒ‘æˆ˜ï¼Œèµ¢å–è£èª‰</p>
                <input type="text" id="challengeTheme" class="skill-input" placeholder="æŒ‘æˆ˜ä¸»é¢˜ï¼ˆå¦‚ï¼šæœ¨å·¥æŠ€èƒ½ï¼‰">
                <button class="btn" onclick="generateChallenge()">ç”ŸæˆæŒ‘æˆ˜é¢˜ç›®</button>
                <div id="challengeResult" class="list-item"></div>
            </div>
        </div>

        <footer>
            <p>çº¢å°˜çµå¢ƒ Â· åˆ›ä¸–å®éªŒ | çµç›¸ä¸å¿ƒæ„¿å­˜äºäº‘ç«¯ï¼Œä¼šè¯ç»ˆäº†æ—¶æœ¬åœ°ç—•è¿¹å°†åŒ¿ååŒ–ã€‚</p>
        </footer>
    </div>

    <script>
        // ---------- å…¨å±€å˜é‡ ----------
        let currentStep = 0;
        let steps = [];
        let selectedAnswer = 0;
        let userCharacter = { hanfu: '', accessory: '', pattern: '' };

        // ç™»å²¸åŠŸèƒ½
        function landing() {
            const anonId = 'anon_' + Math.random().toString(36).substring(2, 18);
            localStorage.setItem('anon_id', anonId);
            document.getElementById('anon-id-display').innerText = `ä½ çš„åŒ¿åIDï¼š${anonId}`;
            alert('ç™»å²¸æˆåŠŸï¼æ¬¢è¿æ¥åˆ°çº¢å°˜çµå¢ƒã€‚');
        }

        // ç‚¹äº®æŠ€èƒ½
        function lightSkill() {
            if (!localStorage.getItem('anon_id')) {
                alert('è¯·å…ˆåœ¨çµæ§æ´¥æ¸¡ç™»å²¸');
                document.querySelector('[data-tab="home"]').click();
                return;
            }
            localStorage.setItem('skillLighted', 'true');
            document.getElementById('light-skill-btn').disabled = true;
            document.getElementById('skill-status').innerText = 'âœ… æŠ€èƒ½å·²ç‚¹äº®';
            alert('å¤ªæÂ·æ— æå¼å·²ç‚¹äº®ï¼');
        }

        // å‘å¸ƒå¿ƒæ„¿ï¼ˆæ¨¡æ‹Ÿï¼‰
        function submitWish() {
            const wish = document.getElementById('wishInput').value;
            if (!wish) return alert('è¯·è¾“å…¥å¿ƒæ„¿');
            alert(`å¿ƒæ„¿â€œ${wish}â€å·²å‘å¸ƒï¼Œç­‰å¾…å®ç°ã€‚`);
            document.getElementById('wishInput').value = '';
        }

        // ç»ƒä¹ ç›¸å…³
        function startPractice() {
            if (!localStorage.getItem('skillLighted')) {
                alert('è¯·å…ˆåœ¨ç…å¬›ç¦åœ°ç‚¹äº®æŠ€èƒ½');
                return;
            }
            // æ¨¡æ‹Ÿæ­¥éª¤æ•°æ®
            steps = [
                "ç¬¬ä¸€æ­¥ï¼šåŒè„šä¸è‚©åŒå®½ï¼Œè‡ªç„¶ç«™ç«‹",
                "ç¬¬äºŒæ­¥ï¼šè†ç›–å¾®å±ˆï¼Œå¦‚è½»åä¸‹",
                "ç¬¬ä¸‰æ­¥ï¼šè…°èƒŒæŒºç›´ï¼ŒåŒæ‰‹è‡ªç„¶ä¸‹å‚",
                "ç¬¬å››æ­¥ï¼šé™ç«‹ç‰‡åˆ»ï¼Œæ„Ÿå—å‘¼å¸"
            ];
            const container = document.getElementById('steps-container');
            container.innerHTML = '';
            steps.forEach((step, idx) => {
                container.innerHTML += `
                    <div class="progress-step" id="step${idx+1}">
                        <div class="step-icon">${idx+1}</div>
                        <div class="step-label">${step.substring(0,6)}...</div>
                    </div>
                `;
            });
            currentStep = 0;
            document.getElementById('start-practice').style.display = 'none';
            document.getElementById('next-step').style.display = 'inline-block';
            document.getElementById('step-desc').innerText = steps[0];
        }

        function nextStep() {
            currentStep++;
            for (let i = 1; i <= currentStep; i++) {
                const el = document.getElementById(`step${i}`);
                if (el) el.classList.add('completed');
            }
            if (currentStep < steps.length) {
                document.getElementById('step-desc').innerText = steps[currentStep];
            }
            if (currentStep >= steps.length) {
                document.getElementById('next-step').style.display = 'none';
                document.getElementById('finish-practice').style.display = 'inline-block';
                document.getElementById('step-desc').innerText = 'å·²å®Œæˆæ‰€æœ‰æ­¥éª¤ï¼Œç‚¹å‡»å®Œæˆç»ƒä¹ ';
            }
        }

        function finishPractice() {
            localStorage.setItem('practiceCompleted', 'true');
            alert('ç»ƒä¹ å®Œæˆï¼å¯ä»¥å‚åŠ è€ƒæ ¸äº†ã€‚');
            document.querySelector('[data-tab="exam"]').click();
        }

        // è€ƒæ ¸
        function selectAnswer(ans) {
            selectedAnswer = ans;
            document.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
        }

        function submitQuiz() {
            if (!localStorage.getItem('practiceCompleted')) {
                alert('è¯·å…ˆåœ¨è€ƒå·¥å®è®­åºå®Œæˆç»ƒä¹ ');
                return;
            }
            const correct = (selectedAnswer === 2);
            if (correct) {
                localStorage.setItem('examPassed', 'true');
                document.getElementById('quiz-area').style.display = 'none';
                document.getElementById('certificate-area').style.display = 'block';
                document.getElementById('cert-name').innerText = localStorage.getItem('anon_id') || 'åŒ¿åè¡Œè€…';
                document.getElementById('cert-date').innerText = new Date().toLocaleDateString();
            } else {
                alert('ç­”æ¡ˆé”™è¯¯ï¼Œè¯·é‡è¯•');
            }
        }

        function viewHonor() {
            document.querySelector('[data-tab="honor"]').click();
        }

        // ç¥æœºæ¢é˜é—®ç­”ï¼ˆæ¨¡æ‹Ÿï¼‰
        function askShenji() {
            const q = document.getElementById('aiQuestion').value;
            if (!q) return;
            document.getElementById('shenjiAnswer').innerHTML = `ğŸ¤– æ¨¡æ‹Ÿå›ç­”ï¼šå…³äºâ€œ${q}â€çš„é—®é¢˜ï¼Œè¯·è”ç³»ç¥æœºæ¢é˜è·å–çœŸå®AIå›å¤ã€‚`;
        }

        // å…¶ä»–å»ºç­‘åŠŸèƒ½ï¼ˆæ¨¡æ‹Ÿï¼‰
        function generateSummary() {
            const content = document.getElementById('proposalContent').value;
            document.getElementById('proposalResult').innerHTML = `æ‘˜è¦ï¼šè¿™æ˜¯ä¸€ä¸ªå…³äºâ€œ${content.substring(0,20)}â€çš„ææ¡ˆã€‚å…³é”®è¯ï¼šæ²»ç†ã€ç¤¾åŒºã€‚`;
        }

        function refreshHonor() {
            const status = document.getElementById('tai-chi-status');
            if (localStorage.getItem('examPassed')) {
                status.innerText = 'å·²å®Œæˆ';
                status.className = 'status-badge status-completed';
            } else {
                status.innerText = 'æœªå®Œæˆ';
                status.className = 'status-badge status-pending';
            }
        }

        function sendLetter() {
            const target = document.getElementById('letterTarget').value;
            const content = document.getElementById('letterContent').value;
            document.getElementById('letterReply').innerHTML = `æ¨¡æ‹Ÿå›ä¿¡ï¼šæ¥è‡ª${target}çš„å›å¤...`;
        }

        function getTopics() {
            document.getElementById('topicsList').innerHTML = 'ä»Šæ—¥çƒ­é—¨è¯é¢˜ï¼šå¤ªæã€æ±‰æœã€æ¦«å¯';
        }

        function matchResource() {
            const demand = document.getElementById('demandInput').value;
            document.getElementById('resourceResult').innerHTML = `æ ¹æ®â€œ${demand}â€ï¼ŒåŒ¹é…åˆ°3ä¸ªèµ„æºã€‚`;
        }

        function generateDescription() {
            const title = document.getElementById('workTitle').value;
            document.getElementById('workResult').innerHTML = `ç®€ä»‹ï¼šã€Š${title}ã€‹æ˜¯ä¸€éƒ¨ä¼˜ç§€çš„æŠ€èƒ½ä½œå“ã€‚`;
        }

        function selectCharPart(cat, val) {
            userCharacter[cat] = val;
            document.getElementById('characterPreview').innerText = `å½“å‰çµç›¸ï¼š${val}`;
        }

        function saveCharacter() {
            alert('çµç›¸å·²ä¿å­˜');
        }

        function generateFootprintStory() {
            document.getElementById('footprintStory').innerHTML = 'ä½ çš„è¶³è¿¹ï¼šç‚¹äº®å¤ªæï¼Œç»ƒä¹ 4æ­¥ï¼Œé€šè¿‡è€ƒæ ¸ã€‚';
        }

        function generateChallenge() {
            const theme = document.getElementById('challengeTheme').value;
            document.getElementById('challengeResult').innerHTML = `æŒ‘æˆ˜é¢˜ç›®ï¼šåœ¨30åˆ†é’Ÿå†…å®Œæˆä¸€ä»¶${theme}ä½œå“ã€‚`;
        }

        // é€‰é¡¹å¡åˆ‡æ¢
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                document.getElementById(this.getAttribute('data-tab')).classList.add('active');
            });
        });

        // é¡µé¢åŠ è½½æ—¶ä»localStorageæ¢å¤çŠ¶æ€
        window.onload = function() {
            const savedId = localStorage.getItem('anon_id');
            if (savedId) document.getElementById('anon-id-display').innerText = `ä½ çš„åŒ¿åIDï¼š${savedId}`;
            if (localStorage.getItem('skillLighted')) {
                document.getElementById('light-skill-btn')?.setAttribute('disabled', 'true');
                document.getElementById('skill-status').innerText = 'âœ… æŠ€èƒ½å·²ç‚¹äº®';
            }
            if (localStorage.getItem('examPassed')) {
                document.getElementById('tai-chi-status').innerText = 'å·²å®Œæˆ';
                document.getElementById('tai-chi-status').className = 'status-badge status-completed';
            }
        };
    </script>
</body>
</html>